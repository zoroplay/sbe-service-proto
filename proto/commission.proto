syntax = "proto3";

import "google/protobuf/struct.proto";

package commission;


service CommissionService {
  rpc GetAgentUser (GetAgentUserRequest) returns (CommonResponseArray) {}
  rpc ListAgents (GetAgentUsersRequest) returns (CommonResponseObj) {}
  rpc getCommissionProfiles(GetCommissionsRequest) returns (CommonResponseArray) {}
  rpc createCommissionProfile(CommissionProfile) returns (CommonResponseObj) {}
  rpc updateCommissionProfile(CommissionProfile) returns (CommonResponseObj) {}
  rpc assignUserCommissionProfile(AssignUserCommissionProfile) returns (CommonResponseObj) {}
  rpc getUserCommissionProfiles(SingleItemRequest) returns (CommonResponseArray) {}
  rpc removeUserCommissionProfile(AssignUserCommissionProfile) returns (CommonResponseArray) {}
  rpc getCommissionProfile(SingleItemRequest) returns (CommonResponseObj) {}
  rpc deleteCommissionProfile(SingleItemRequest) returns (CommonResponseObj) {}
  rpc getCommissionProfileUsers(GetCommissionsRequest) returns (CommonResponseArray) {}
  rpc calculateCommission(CalculateCommissionRequest) returns (CommonResponseObj) {}
  rpc payoutCommission(PayoutCommissionRequest) returns (CommonResponseObj) {}
   
}

message GetCommissionsRequestData {
  int32 clientId = 1;
  string provider = 2;
  string from = 3;
  string to = 4;
  int32  page = 5;
}



message GetCommissionsRequest {
  int32 clientId = 1;
  optional string provider = 2;
}

message SingleItemRequest {
  int32 itemId = 1;
}

message AssignUserCommissionProfile {
  int32 profileId = 1;
  int32 userId = 2;
  optional string createdAt = 3;
  optional string updatedAt = 4;
}

message GetAgentUserRequest {
  int32 clientId = 1; 
  int32 userId = 2; 
}

message CalculateCommissionRequest {
  int32 clientId = 1;
  int32 userId = 2;
  double stake = 3;
  double totalOdds = 4;
  string provider = 5;
  int32 noOfSelections = 6;
}

message PayoutCommissionRequest {
  repeated PayoutCommissionData data = 1;
}

message PayoutCommissionData {
  int32 clientId = 1;
  int32 userId = 2;
  double stake = 3;
  double totalSales = 4;
  string provider = 5;
  double totalWon = 6;
  double totalTickets = 7;
  double net = 8;
  double commission = 9;
  double profit = 10;
  int32 commissionId = 11;
  string startDate = 12;
  string endDate = 13;
}

message CommissionTurnover {
  optional int32 id = 1;
  int32 event = 2;
  optional CommissionProfile commissionProfile = 3;
  double percentage = 4;
  double maxOdd = 5;
  double minOdd = 6;
  bool oddSet = 7;
  optional string createdAt = 8;
  optional string updatedAt = 9;
}

// Commission Profile
message CommissionProfile {
  int32 clientId = 1;
  optional int32 id = 2;
  string name = 3;
  optional bool isDefault = 4;
  string description = 5;
  string providerGroup = 6;
  string period = 7;
  string calculationType = 8;
  double percentage = 9;
  int32 commissionType = 10;
  repeated CommissionTurnover turnovers = 11;
  optional string createdAt = 12;
  optional string updatedAt = 13;
}



message CommonResponseArray {
  optional int32 status = 1;
  optional bool success = 2;
  string message = 3;
  repeated google.protobuf.Struct data = 4;
  optional string errors = 5;
}

message CommonResponseObj{
  optional int32 status = 1;
  optional bool success = 2;
  string message = 3;
  optional google.protobuf.Struct data = 4;
  optional string errors = 5;
}


message GetAgentUsersRequest {
  int32 clientId = 1;
  optional int32 userId = 2;
  optional string username = 3;
  optional int32 roleId = 4;
  optional int32 state = 5;
  optional int32 page = 6;
}